<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\FrameXML\UI.xsd">
	<Frame name="TSMErrorHandlerTemplate" virtual="true">
		<Scripts>
			<OnLoad>
				self.handler = function(...)
					local msg = LibStub("AceAddon-3.0"):GetAddon("TradeSkillMaster"):IsValidError(...)
					if msg then
						return self.errorHandler(msg, ...)
					elseif self.origErrorHandler then
						self.origErrorHandler(...)
					end
				end
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="AuctionFrameTabTemplate" virtual="true">
		<Scripts>
			<OnLoad>
				self.AddSecureChild = function(frame, proxy, child)
					if rawget(proxy, "Validate") or not proxy.Validate or proxy:Validate() ~= frame then
						error("Attempt to add insecure child to secure frame.", 2)
					else
						child:SetParent(frame)
						return frame
					end
				end
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="TSMAuctionFrame" toplevel="true" parent="UIParent" movable="true" enableMouse="true" hidden="true">
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentPortraitTexture" file="Interface\Addons\TradeSkillMaster\TSM_Icon2">
					<Size x="58" y="58"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="8" y="-7"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString name="$parentTitle" inherits="GameFontNormal" text="|cff99ffffTradeSkillMaster|r">
					<Anchors>
						<Anchor point="TOP">
							<Offset>
								<AbsDimension x="0" y="-18"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<Texture name="$parentTopLeft" file="Interface\AuctionFrame\UI-AuctionFrame-Browse-TopLeft">
					<Size x="256" y="256"/>
					<Anchors>
						<Anchor point="TOPLEFT"/>
					</Anchors>
				</Texture>
				<Texture name="$parentTop" file="Interface\AuctionFrame\UI-AuctionFrame-Browse-Top">
					<Size x="320" y="256"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="256" y="0"/>
					</Anchors>
				</Texture>
				<Texture name="$parentTopRight" file="Interface\AuctionFrame\UI-AuctionFrame-Browse-TopRight">
					<Size x="256" y="256"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentTop" relativePoint="TOPRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
				<Texture name="$parentBotLeft" file="Interface\AuctionFrame\UI-AuctionFrame-Browse-BotLeft">
					<Size x="256" y="256"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="0" y="-256"/>
					</Anchors>
				</Texture>
				<Texture name="$parentBot" file="Interface\AuctionFrame\UI-AuctionFrame-Auction-Bot">
					<Size x="320" y="256"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="256" y="-256"/>
					</Anchors>
				</Texture>
				<Texture name="$parentBotRight" file="Interface\AuctionFrame\UI-AuctionFrame-Bid-BotRight">
					<Size x="256" y="256"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentBot" relativePoint="TOPRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<Frame name="$parentMoneyFrame" inherits="SmallMoneyFrameTemplate">
				<Anchors>
					<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="181" y="20"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Button name="$parentCloseButton" inherits="UIPanelCloseButton">
				<Anchors>
					<Anchor point="TOPRIGHT">
						<Offset>
							<AbsDimension x="3" y="-8"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						if TSMAuctionFrame.isAttached then
							CloseAuctionHouse()
						else
							TSMAuctionFrame:OnManualClose()
						end
					</OnClick>
				</Scripts>
			</Button>
		</Frames>
		<Scripts>
			<OnMouseDown>
				if self.isAttached and AuctionFrame:IsMovable() then
					AuctionFrame:StartMoving()
				elseif not self.isAttached then
					self:StartMoving()
				end
			</OnMouseDown>
			<OnMouseUp>
				if self.isAttached and AuctionFrame:IsMovable() then
					AuctionFrame:StopMovingOrSizing()
				elseif not self.isAttached then
					self:StopMovingOrSizing()
					self.detachedPoint = {self:GetPoint(1)}
				end
			</OnMouseUp>
		</Scripts>
	</Frame>
</Ui>
